{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\arbog\\\\Documents\\\\workshop_app_frontend\\\\front-end\\\\src\\\\Components\\\\SharedComponents\\\\Login.js\";\nimport React, { useContext, useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { UserContext } from \"../../Context/UserContext\";\nimport { WorkshopContext } from \"../../Context/WorkshopContext\";\nimport { Link } from \"react-router-dom\";\nimport \"./Login.scss\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../../Context/AuthContext\";\n\nconst Login = () => {\n  const {\n    register,\n    handleSubmit,\n    reset,\n    errors\n  } = useForm();\n  const {\n    setUserInformation\n  } = useContext(UserContext);\n  const {\n    userWorkshops,\n    getUserWorkshops,\n    getWorkshop,\n    getAttendees\n  } = useContext(WorkshopContext);\n  const {\n    setAuth\n  } = useContext(AuthContext);\n  const [incorrectEmail, setIncorrectEmail] = useState(false);\n  const [incorrectPassword, setIncorrectPassword] = useState(false);\n\n  const onSubmit = async data => {\n    //run validation\n    axios.post(\"/auth/login\", data).then(response => response.data).then(user => {\n      console.log(user);\n      setUserInformation(user);\n      const {\n        id,\n        role\n      } = user.user;\n\n      if (role === \"attendee\") {\n        getUserWorkshops(user.id);\n      }\n\n      if (role === \"speaker\") {\n        getWorkshop(id);\n        getAttendees(id);\n      }\n    }).then(() => setAuth(true)).catch(error => {\n      if (error.response.data.message === \"Incorrect email.\") {\n        setIncorrectEmail(true);\n\n        if (incorrectPassword === true) {\n          setIncorrectPassword(false);\n        } //console.log(error.response.data);\n        //console.log(error.response.status);\n        //console.log(error.response.headers);\n\n      } else if (error.response.data.message === \"Incorrect password.\") {\n        setIncorrectPassword(true);\n\n        if (incorrectEmail === true) {\n          setIncorrectEmail(false);\n        } //console.log(error.request);\n\n      }\n    }); //const response = await axios.post('/auth/login', data);\n    //console.log(\"response\",response)\n    //await setUserInformation(response.data);\n    //const { id, role } = response.data.user\n    //if(role === \"attendee\"){\n    //  getUserWorkshops(id)\n    //}\n    //if(role === \"speaker\"){\n    //    getWorkshop(id);\n    //    getAttendees(id)\n    //}\n    //setAuth(true);\n    ////redirect to role-based view\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-page-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"right-side-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 11\n    }\n  }, \"Welcome to productized\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"email\",\n    type: \"text\",\n    placeholder: \"Email Address\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }), incorrectEmail && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 32\n    }\n  }, \"no user found with this email\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"password\",\n    type: \"password\",\n    placeholder: \"Password\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 13\n    }\n  }), incorrectPassword && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 35\n    }\n  }, \"incorrect password\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 11\n    }\n  }, \"don't have an account yet?\", \" \", /*#__PURE__*/React.createElement(Link, {\n    to: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, \"create an account\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 11\n    }\n  }, \"Forgot your account?\"))));\n};\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/arbog/Documents/workshop_app_frontend/front-end/src/Components/SharedComponents/Login.js"],"names":["React","useContext","useState","useForm","UserContext","WorkshopContext","Link","axios","AuthContext","Login","register","handleSubmit","reset","errors","setUserInformation","userWorkshops","getUserWorkshops","getWorkshop","getAttendees","setAuth","incorrectEmail","setIncorrectEmail","incorrectPassword","setIncorrectPassword","onSubmit","data","post","then","response","user","console","log","id","role","catch","error","message"],"mappings":"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","sourcesContent":["import React, { useContext, useState } from \"react\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { UserContext } from \"../../Context/UserContext\";\r\nimport { WorkshopContext } from \"../../Context/WorkshopContext\";\r\nimport { Link } from \"react-router-dom\";\r\nimport \"./Login.scss\";\r\nimport axios from \"axios\";\r\nimport { AuthContext } from \"../../Context/AuthContext\";\r\n\r\nconst Login = () => {\r\n  const { register, handleSubmit, reset, errors } = useForm();\r\n  const { setUserInformation } = useContext(UserContext);\r\n  const {\r\n    userWorkshops,\r\n    getUserWorkshops,\r\n    getWorkshop,\r\n    getAttendees,\r\n  } = useContext(WorkshopContext);\r\n  const { setAuth } = useContext(AuthContext);\r\n\r\n  const [incorrectEmail, setIncorrectEmail] = useState(false);\r\n  const [incorrectPassword, setIncorrectPassword] = useState(false);\r\n\r\n  const onSubmit = async (data) => {\r\n    //run validation\r\n    axios\r\n      .post(\"/auth/login\", data)\r\n      .then((response) => response.data)\r\n      .then((user) => {\r\n        console.log(user);\r\n        setUserInformation(user);\r\n        const { id, role } = user.user;\r\n        if (role === \"attendee\") {\r\n          getUserWorkshops(user.id);\r\n        }\r\n        if (role === \"speaker\") {\r\n          getWorkshop(id);\r\n          getAttendees(id);\r\n        }\r\n      })\r\n      .then(() => setAuth(true))\r\n      .catch((error) => {\r\n        if (error.response.data.message === \"Incorrect email.\") {\r\n          setIncorrectEmail(true);\r\n          if (incorrectPassword === true) {\r\n            setIncorrectPassword(false);\r\n          }\r\n          //console.log(error.response.data);\r\n          //console.log(error.response.status);\r\n          //console.log(error.response.headers);\r\n        } else if (error.response.data.message === \"Incorrect password.\") {\r\n          setIncorrectPassword(true);\r\n          if (incorrectEmail === true) {\r\n            setIncorrectEmail(false);\r\n          }\r\n          //console.log(error.request);\r\n        }\r\n      });\r\n    //const response = await axios.post('/auth/login', data);\r\n    //console.log(\"response\",response)\r\n    //await setUserInformation(response.data);\r\n    //const { id, role } = response.data.user\r\n    //if(role === \"attendee\"){\r\n    //  getUserWorkshops(id)\r\n    //}\r\n    //if(role === \"speaker\"){\r\n    //    getWorkshop(id);\r\n    //    getAttendees(id)\r\n    //}\r\n    //setAuth(true);\r\n    ////redirect to role-based view\r\n  };\r\n\r\n  return (\r\n    <div className=\"login-page-container\">\r\n      <div className=\"login-container\">\r\n        <div className=\"login-img\" />\r\n        <div className=\"right-side-container\">\r\n          <h1>Welcome to productized</h1>\r\n          <form onSubmit={handleSubmit(onSubmit)}>\r\n            <input\r\n              name=\"email\"\r\n              type=\"text\"\r\n              placeholder=\"Email Address\"\r\n              ref={register}\r\n            />\r\n            {incorrectEmail && <p>no user found with this email</p>}\r\n            <input\r\n              name=\"password\"\r\n              type=\"password\"\r\n              placeholder=\"Password\"\r\n              ref={register}\r\n            />\r\n            {incorrectPassword && <p>incorrect password</p>}\r\n            <button type=\"submit\">Login</button>\r\n            <hr />\r\n          </form>\r\n          <p>\r\n            don't have an account yet?{\" \"}\r\n            <Link to=\"/signup\">create an account</Link>\r\n          </p>\r\n          <p>Forgot your account?</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}