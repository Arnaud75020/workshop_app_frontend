{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\arbog\\\\Documents\\\\workshop_app_frontend\\\\front-end\\\\src\\\\Context\\\\WorkshopContext.js\";\nimport React, { createContext, useState, useEffect } from \"react\";\nimport axios from \"axios\";\nexport const WorkshopContext = createContext();\n\nconst WorkshopContextProvider = props => {\n  const [workshops, setWorkshops] = useState([]);\n  const [tempWorkshops, setTempWorkshop] = useState([]);\n  const [allWorkshops, setAllWorkshops] = useState([]);\n  const [months, setMonths] = useState([]);\n  const [searchWorkshopValue, setSearchWorkshopValue] = useState(\"\");\n  const [searchAttendeeValue, setSearchAttendeeValue] = useState([]);\n  const [userWorkshops, setUserWorkshops] = useState([]);\n  const [workshop, setWorkshop] = useState([]);\n  const [attendees, setAttendees] = useState([]);\n  const [allAttendees, setAllAttendees] = useState([]);\n  const [dateFilter, setdDateFilter] = useState(\"All workshops\");\n  const [myAttendeesList, setMyAttendeesList] = useState([]);\n  useEffect(() => {\n    getWorkshops();\n    getMonth();\n  }, []);\n\n  const getWorkshops = () => {\n    axios.get(\"/workshops\").then(response => response.data).then(workshopsList => {\n      setWorkshops(workshopsList);\n      setAllWorkshops(workshopsList);\n    });\n  };\n\n  const getWorkshop = speakerId => {\n    axios.get(`/workshops/${speakerId}`).then(response => response.data[0]).then(workshopInfo => {\n      console.log(\"WORKSHOP CONTEXT\", workshopInfo);\n      setWorkshop(workshopInfo);\n    });\n  };\n\n  const getAttendees = speakerId => {\n    axios.get(`/workshops/${speakerId}/attendees`).then(response => response.data).then(attendeesList => {\n      setAttendees(attendeesList);\n      setAllAttendees(attendeesList);\n    });\n  };\n\n  const getUserWorkshops = id => {\n    axios.get(`/workshops/user-workshops/${id}`).then(response => response.data).then(userWorkshops => {\n      setUserWorkshops(userWorkshops);\n    });\n  };\n\n  const addUserWorkshop = (workshopId, userId, speakerId) => {\n    const user_workshop = {\n      workshop_id: workshopId,\n      user_id: userId,\n      speaker_id: speakerId\n    };\n    axios.post(\"/workshops/user-workshops/add\", user_workshop).then(response => response.data).then(newUserWorkshops => {\n      console.log(\"ADD USER\", newUserWorkshops);\n      setUserWorkshops(newUserWorkshops);\n    });\n    getWorkshops();\n  };\n\n  const deleteUserWorkshop = (workshopId, userId) => {\n    const user_workshop = [workshopId, userId];\n    axios.delete(\"/workshops/user-workshops/delete\", {\n      data: user_workshop\n    }).then(response => response.data).then(newUserWorkshops => {\n      console.log(\"DELETE USER\", newUserWorkshops);\n      setUserWorkshops(newUserWorkshops);\n    });\n    getWorkshops();\n  };\n\n  const getMonth = () => {\n    axios.get(\"/workshops/months\").then(response => response.data).then(monthsList => {\n      console.log(\"monthsList\", monthsList);\n      setMonths(monthsList);\n    });\n  };\n\n  const addTempWorkshop = newObject => {\n    setTempWorkshop([...tempWorkshops, newObject]);\n  };\n\n  const confirmEditedWorkshop = newWorkshop => {\n    const newWorkshopId = newWorkshop.id;\n    axios.put(`/workshops/${newWorkshopId}`, newWorkshop);\n    getWorkshops();\n    getMonth();\n  };\n\n  const confirmWorkshop = newObject => {\n    axios.post(\"/workshops\", newObject);\n    getWorkshops();\n    getMonth();\n  };\n\n  const editTempWorkshop = newObject => {\n    const workshopsList = [...tempWorkshops];\n    const i = workshopsList.findIndex(wrkshop => wrkshop.id === newObject.id);\n    workshopsList.splice(i, 1, newObject);\n    setTempWorkshop(workshopsList);\n  };\n\n  const deleteTempWorkshop = id => {\n    const workshopList = tempWorkshops.filter(workshop => workshop.id !== id);\n    setTempWorkshop(workshopList);\n  };\n\n  const deleteWorkshop = (id, enrolled_attendees) => {\n    if (enrolled_attendees > 0) {\n      axios.delete(`/workshops/workshop-user-workshops/${id}`).then(() => {\n        axios.delete(`/workshops/${id}`);\n      });\n    }\n\n    axios.delete(`/workshops/${id}`);\n    getWorkshops();\n  };\n\n  const handleFilterDate = event => {\n    const {\n      value\n    } = event.target;\n\n    if (value === \"All Workshops\") {\n      setdDateFilter(value);\n      setWorkshops(allWorkshops);\n    } else {\n      const filterdResult = allWorkshops.filter(workshop => {\n        const workshopMonth = workshop.workshop_month;\n        return workshopMonth === value;\n      });\n      setdDateFilter(value);\n      setWorkshops(filterdResult);\n      setSearchWorkshopValue(\"\");\n    }\n  };\n\n  const handleWorkshopSearch = event => {\n    const {\n      value\n    } = event.target;\n\n    if (value.length) {\n      const filteredWorkshops = allWorkshops.filter(workshop => {\n        return workshop.title.toLowerCase().includes(value.toLowerCase()) || workshop.workshop_speaker.toLowerCase().includes(value.toLowerCase());\n      });\n      setSearchWorkshopValue(value);\n      setWorkshops(filteredWorkshops);\n      setdDateFilter(\"All workshops\");\n    } else {\n      setSearchWorkshopValue(value);\n      setWorkshops(allWorkshops);\n    }\n  };\n\n  const handleAttendeeSearch = event => {\n    const {\n      value\n    } = event.target;\n\n    if (value.length) {\n      const filteredAttendees = allAttendees.filter(attendee => {\n        const attendeeName = `${attendee.firstname} ${attendee.lastname}`;\n        return attendeeName.toLowerCase().includes(value.toLowerCase());\n      });\n      setSearchAttendeeValue(value);\n      setAttendees(filteredAttendees);\n    } else {\n      setSearchAttendeeValue(value);\n      setAttendees(allAttendees);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(WorkshopContext.Provider, {\n    value: {\n      workshops,\n      tempWorkshops,\n      addTempWorkshop,\n      confirmWorkshop,\n      allWorkshops,\n      handleFilterDate,\n      editTempWorkshop,\n      deleteTempWorkshop,\n      months,\n      setTempWorkshop,\n      handleWorkshopSearch,\n      searchWorkshopValue,\n      getUserWorkshops,\n      userWorkshops,\n      addUserWorkshop,\n      deleteUserWorkshop,\n      getWorkshops,\n      confirmEditedWorkshop,\n      getWorkshop,\n      workshop,\n      getAttendees,\n      attendees,\n      searchAttendeeValue,\n      handleAttendeeSearch,\n      dateFilter,\n      deleteWorkshop\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }\n  }, props.children));\n};\n\nexport default WorkshopContextProvider;","map":{"version":3,"sources":["C:/Users/arbog/Documents/workshop_app_frontend/front-end/src/Context/WorkshopContext.js"],"names":["React","createContext","useState","useEffect","axios","WorkshopContext","WorkshopContextProvider","props","workshops","setWorkshops","tempWorkshops","setTempWorkshop","allWorkshops","setAllWorkshops","months","setMonths","searchWorkshopValue","setSearchWorkshopValue","searchAttendeeValue","setSearchAttendeeValue","userWorkshops","setUserWorkshops","workshop","setWorkshop","attendees","setAttendees","allAttendees","setAllAttendees","dateFilter","setdDateFilter","myAttendeesList","setMyAttendeesList","getWorkshops","getMonth","get","then","response","data","workshopsList","getWorkshop","speakerId","workshopInfo","console","log","getAttendees","attendeesList","getUserWorkshops","id","addUserWorkshop","workshopId","userId","user_workshop","workshop_id","user_id","speaker_id","post","newUserWorkshops","deleteUserWorkshop","delete","monthsList","addTempWorkshop","newObject","confirmEditedWorkshop","newWorkshop","newWorkshopId","put","confirmWorkshop","editTempWorkshop","i","findIndex","wrkshop","splice","deleteTempWorkshop","workshopList","filter","deleteWorkshop","enrolled_attendees","handleFilterDate","event","value","target","filterdResult","workshopMonth","workshop_month","handleWorkshopSearch","length","filteredWorkshops","title","toLowerCase","includes","workshop_speaker","handleAttendeeSearch","filteredAttendees","attendee","attendeeName","firstname","lastname","children"],"mappings":"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","sourcesContent":["import React, { createContext, useState, useEffect } from \"react\";\r\nimport axios from \"axios\";\r\n\r\nexport const WorkshopContext = createContext();\r\n\r\nconst WorkshopContextProvider = (props) => {\r\n  const [workshops, setWorkshops] = useState([]);\r\n  const [tempWorkshops, setTempWorkshop] = useState([]);\r\n  const [allWorkshops, setAllWorkshops] = useState([]);\r\n  const [months, setMonths] = useState([]);\r\n  const [searchWorkshopValue, setSearchWorkshopValue] = useState(\"\");\r\n  const [searchAttendeeValue, setSearchAttendeeValue] = useState([]);\r\n  const [userWorkshops, setUserWorkshops] = useState([]);\r\n  const [workshop, setWorkshop] = useState([]);\r\n  const [attendees, setAttendees] = useState([]);\r\n  const [allAttendees, setAllAttendees] = useState([]);\r\n  const [dateFilter, setdDateFilter] = useState(\"All workshops\");\r\n  const [myAttendeesList, setMyAttendeesList] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getWorkshops();\r\n    getMonth();\r\n  }, []);\r\n\r\n  const getWorkshops = () => {\r\n    axios\r\n      .get(\"/workshops\")\r\n      .then((response) => response.data)\r\n      .then((workshopsList) => {\r\n        setWorkshops(workshopsList);\r\n        setAllWorkshops(workshopsList);\r\n      });\r\n  };\r\n\r\n  const getWorkshop = (speakerId) => {\r\n    axios\r\n      .get(`/workshops/${speakerId}`)\r\n      .then((response) => response.data[0])\r\n      .then((workshopInfo) => {\r\n        console.log(\"WORKSHOP CONTEXT\", workshopInfo);\r\n        setWorkshop(workshopInfo);\r\n      });\r\n  };\r\n\r\n  const getAttendees = (speakerId) => {\r\n    axios\r\n      .get(`/workshops/${speakerId}/attendees`)\r\n      .then((response) => response.data)\r\n      .then((attendeesList) => {\r\n        setAttendees(attendeesList);\r\n        setAllAttendees(attendeesList);\r\n      });\r\n  };\r\n\r\n  const getUserWorkshops = (id) => {\r\n    axios\r\n      .get(`/workshops/user-workshops/${id}`)\r\n      .then((response) => response.data)\r\n      .then((userWorkshops) => {\r\n        setUserWorkshops(userWorkshops);\r\n      });\r\n  };\r\n\r\n  const addUserWorkshop = (workshopId, userId, speakerId) => {\r\n    const user_workshop = {\r\n      workshop_id: workshopId,\r\n      user_id: userId,\r\n      speaker_id: speakerId,\r\n    };\r\n    axios\r\n      .post(\"/workshops/user-workshops/add\", user_workshop)\r\n      .then((response) => response.data)\r\n      .then((newUserWorkshops) => {\r\n        console.log(\"ADD USER\", newUserWorkshops);\r\n        setUserWorkshops(newUserWorkshops);\r\n      });\r\n    getWorkshops();\r\n  };\r\n\r\n  const deleteUserWorkshop = (workshopId, userId) => {\r\n    const user_workshop = [workshopId, userId];\r\n    axios\r\n      .delete(\"/workshops/user-workshops/delete\", { data: user_workshop })\r\n      .then((response) => response.data)\r\n      .then((newUserWorkshops) => {\r\n        console.log(\"DELETE USER\", newUserWorkshops);\r\n\r\n        setUserWorkshops(newUserWorkshops);\r\n      });\r\n    getWorkshops();\r\n  };\r\n\r\n  const getMonth = () => {\r\n    axios\r\n      .get(\"/workshops/months\")\r\n      .then((response) => response.data)\r\n      .then((monthsList) => {\r\n        console.log(\"monthsList\", monthsList);\r\n        setMonths(monthsList);\r\n      });\r\n  };\r\n\r\n  const addTempWorkshop = (newObject) => {\r\n    setTempWorkshop([...tempWorkshops, newObject]);\r\n  };\r\n\r\n  const confirmEditedWorkshop = (newWorkshop) => {\r\n    const newWorkshopId = newWorkshop.id;\r\n\r\n    axios.put(`/workshops/${newWorkshopId}`, newWorkshop);\r\n\r\n    getWorkshops();\r\n    getMonth();\r\n  };\r\n\r\n  const confirmWorkshop = (newObject) => {\r\n    axios.post(\"/workshops\", newObject);\r\n    getWorkshops();\r\n    getMonth();\r\n  };\r\n\r\n  const editTempWorkshop = (newObject) => {\r\n    const workshopsList = [...tempWorkshops];\r\n    const i = workshopsList.findIndex((wrkshop) => wrkshop.id === newObject.id);\r\n    workshopsList.splice(i, 1, newObject);\r\n    setTempWorkshop(workshopsList);\r\n  };\r\n\r\n  const deleteTempWorkshop = (id) => {\r\n    const workshopList = tempWorkshops.filter((workshop) => workshop.id !== id);\r\n    setTempWorkshop(workshopList);\r\n  };\r\n\r\n  const deleteWorkshop = (id, enrolled_attendees) => {\r\n    if (enrolled_attendees > 0) {\r\n      axios.delete(`/workshops/workshop-user-workshops/${id}`).then(() => {\r\n        axios.delete(`/workshops/${id}`);\r\n      });\r\n    }\r\n    axios.delete(`/workshops/${id}`);\r\n\r\n    getWorkshops();\r\n  };\r\n\r\n  const handleFilterDate = (event) => {\r\n    const { value } = event.target;\r\n\r\n    if (value === \"All Workshops\") {\r\n      setdDateFilter(value);\r\n      setWorkshops(allWorkshops);\r\n    } else {\r\n      const filterdResult = allWorkshops.filter((workshop) => {\r\n        const workshopMonth = workshop.workshop_month;\r\n        return workshopMonth === value;\r\n      });\r\n      setdDateFilter(value);\r\n      setWorkshops(filterdResult);\r\n      setSearchWorkshopValue(\"\");\r\n    }\r\n  };\r\n\r\n  const handleWorkshopSearch = (event) => {\r\n    const { value } = event.target;\r\n    if (value.length) {\r\n      const filteredWorkshops = allWorkshops.filter((workshop) => {\r\n        return (\r\n          workshop.title.toLowerCase().includes(value.toLowerCase()) ||\r\n          workshop.workshop_speaker.toLowerCase().includes(value.toLowerCase())\r\n        );\r\n      });\r\n      setSearchWorkshopValue(value);\r\n      setWorkshops(filteredWorkshops);\r\n      setdDateFilter(\"All workshops\");\r\n    } else {\r\n      setSearchWorkshopValue(value);\r\n      setWorkshops(allWorkshops);\r\n    }\r\n  };\r\n\r\n  const handleAttendeeSearch = (event) => {\r\n    const { value } = event.target;\r\n\r\n    if (value.length) {\r\n      const filteredAttendees = allAttendees.filter((attendee) => {\r\n        const attendeeName = `${attendee.firstname} ${attendee.lastname}`;\r\n        return attendeeName.toLowerCase().includes(value.toLowerCase());\r\n      });\r\n      setSearchAttendeeValue(value);\r\n      setAttendees(filteredAttendees);\r\n    } else {\r\n      setSearchAttendeeValue(value);\r\n      setAttendees(allAttendees);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <WorkshopContext.Provider\r\n        value={{\r\n          workshops,\r\n          tempWorkshops,\r\n          addTempWorkshop,\r\n          confirmWorkshop,\r\n          allWorkshops,\r\n          handleFilterDate,\r\n          editTempWorkshop,\r\n          deleteTempWorkshop,\r\n          months,\r\n          setTempWorkshop,\r\n          handleWorkshopSearch,\r\n          searchWorkshopValue,\r\n          getUserWorkshops,\r\n          userWorkshops,\r\n          addUserWorkshop,\r\n          deleteUserWorkshop,\r\n          getWorkshops,\r\n          confirmEditedWorkshop,\r\n          getWorkshop,\r\n          workshop,\r\n          getAttendees,\r\n          attendees,\r\n          searchAttendeeValue,\r\n          handleAttendeeSearch,\r\n          dateFilter,\r\n          deleteWorkshop,\r\n        }}\r\n      >\r\n        {props.children}\r\n      </WorkshopContext.Provider>\r\n    </div>\r\n  );\r\n};\r\nexport default WorkshopContextProvider;\r\n"]},"metadata":{},"sourceType":"module"}