{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\arbog\\\\Documents\\\\workshop_app_frontend\\\\front-end\\\\src\\\\Components\\\\SharedComponents\\\\ProfileSubcomponents\\\\ChangePasswordForm.js\";\nimport React, { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport './ChangePasswordForm.scss';\nimport axios from 'axios';\n\nconst ChangePasswordForm = ({\n  user,\n  handleChangePassword\n}) => {\n  const [passwordErr, setPasswordErr] = useState(false);\n  const [passwordsDontMatch, setPasswordsDontMatch] = useState(false);\n  const [active, setActive] = useState(\"current\");\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n\n  const onSubmit = data => {\n    axios.post('/auth/change-password', data).then(response => response.data).then(data => {\n      if (data.message === \"password correct\") {\n        setActive(\"new\");\n      }\n    }).catch(error => {\n      if (error.response) {\n        setPasswordErr(true);\n        console.log(error.response.data);\n        console.log(error.response.status);\n        console.log(error.response.headers);\n      } else if (error.request) {\n        console.log(error.request);\n      } else {\n        console.log('Error', error.message);\n      }\n\n      console.log(error.config);\n    });\n  };\n\n  const changePassword = data => {\n    const {\n      newPassword,\n      confirmPassword\n    } = data;\n\n    if (newPassword === confirmPassword) {\n      axios.put('users/change-password', data);\n      setActive(\"success\");\n      setTimeout(() => handleChangePassword(), 1500);\n      setTimeout(() => setActive(\"current\"), 2000);\n    } else {\n      setPasswordsDontMatch(true);\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"change-password-modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 9\n    }\n  }, active === \"current\" && /*#__PURE__*/React.createElement(\"form\", {\n    className: \"password-form\",\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"email\",\n    type: \"hidden\",\n    value: user.email,\n    contentEditable: false,\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"previous-password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 17\n    }\n  }, \"insert current password\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"password\",\n    id: \"previous-password\",\n    type: \"password\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }), passwordErr && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 33\n    }\n  }, \"incorrect password\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 17\n    }\n  }, \"submit\")), active === \"new\" && /*#__PURE__*/React.createElement(\"form\", {\n    className: \"password-form\",\n    onSubmit: handleSubmit(changePassword),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"email\",\n    type: \"hidden\",\n    value: user.email,\n    contentEditable: false,\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"label-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"new-password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, \"New Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"newPassword\",\n    id: \"new-password\",\n    type: \"password\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"label-input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"label\", {\n    htmlFor: \"confirm-password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 21\n    }\n  }, \"Confirm New Password\"), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"confirmPassword\",\n    id: \"confirm-password\",\n    type: \"password\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 21\n    }\n  })), passwordsDontMatch && /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 40\n    }\n  }, \"passwords don't match\"), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }\n  }, \"submit\")), active === \"success\" && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"password-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 17\n    }\n  }, \"password changed\")));\n};\n\nexport default ChangePasswordForm;","map":{"version":3,"sources":["C:/Users/arbog/Documents/workshop_app_frontend/front-end/src/Components/SharedComponents/ProfileSubcomponents/ChangePasswordForm.js"],"names":["React","useState","useForm","axios","ChangePasswordForm","user","handleChangePassword","passwordErr","setPasswordErr","passwordsDontMatch","setPasswordsDontMatch","active","setActive","register","handleSubmit","errors","onSubmit","data","post","then","response","message","catch","error","console","log","status","headers","request","config","changePassword","newPassword","confirmPassword","put","setTimeout","email"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport './ChangePasswordForm.scss'\r\nimport axios from 'axios';\r\n\r\n\r\nconst ChangePasswordForm = ({ user, handleChangePassword }) => {\r\n\r\n    const [passwordErr, setPasswordErr] = useState(false)\r\n    const [passwordsDontMatch, setPasswordsDontMatch] = useState(false)\r\n    const [active, setActive] = useState(\"current\")\r\n\r\n    const {register, handleSubmit, errors} = useForm();\r\n\r\n    const onSubmit = (data) => {\r\n          axios\r\n            .post('/auth/change-password', data)\r\n            .then((response) => response.data)\r\n            .then((data) => {\r\n                if(data.message === \"password correct\"){\r\n                    setActive(\"new\")\r\n                }\r\n            })\r\n            .catch((error) => {\r\n                 if (error.response) {\r\n                    setPasswordErr(true)\r\n                    console.log(error.response.data);\r\n                    console.log(error.response.status);\r\n                    console.log(error.response.headers);\r\n                } else if (error.request) {\r\n                    console.log(error.request);\r\n                } else {\r\n                    console.log('Error', error.message);\r\n                }\r\n                console.log(error.config);\r\n            });\r\n    }\r\n\r\n    const changePassword = (data) => {\r\n        const { newPassword, confirmPassword } = data;\r\n        if(newPassword === confirmPassword){\r\n            axios\r\n                .put('users/change-password', data )\r\n                setActive(\"success\")\r\n                setTimeout(() => handleChangePassword(), 1500)\r\n                setTimeout(() => setActive(\"current\"), 2000)\r\n                \r\n              \r\n        } else{\r\n            setPasswordsDontMatch(true)\r\n        }\r\n    }\r\n\r\n    return(\r\n        <div className=\"change-password-modal\">\r\n           {active === \"current\" && \r\n            <form className=\"password-form\" onSubmit={handleSubmit(onSubmit)}>\r\n                <input\r\n                    name='email'\r\n                    type='hidden'\r\n                    value={user.email}\r\n                    contentEditable={false}\r\n                    ref={register}\r\n                 />\r\n                <label htmlFor=\"previous-password\">insert current password</label>\r\n                <input\r\n                    name=\"password\"\r\n                    id=\"previous-password\"\r\n                    type=\"password\"\r\n                    ref={register} />\r\n                {passwordErr && <p>incorrect password</p>}\r\n                \r\n                <button type=\"submit\">submit</button>\r\n            </form>}\r\n            {active === \"new\" &&\r\n            <form className=\"password-form\" onSubmit={handleSubmit(changePassword)}> \r\n                <input\r\n                    name='email'\r\n                    type='hidden'\r\n                    value={user.email}\r\n                    contentEditable={false}\r\n                    ref={register}\r\n                />\r\n                <div className=\"label-input\">\r\n                    <label htmlFor=\"new-password\">New Password</label>\r\n                    <input\r\n                        name=\"newPassword\"\r\n                        id=\"new-password\"\r\n                        type=\"password\"\r\n                        ref={register} />\r\n                </div>\r\n                <div className=\"label-input\">\r\n                    <label htmlFor=\"confirm-password\">Confirm New Password</label>\r\n                    <input\r\n                        name=\"confirmPassword\"\r\n                        id=\"confirm-password\"\r\n                        type=\"password\"\r\n                        ref={register} />\r\n                </div>\r\n                {passwordsDontMatch && <p>passwords don't match</p>}\r\n                <button type=\"submit\">submit</button>\r\n            </form>}\r\n            {active === \"success\" &&\r\n            <div className=\"password-form\">\r\n                <p>password changed</p>\r\n            </div>\r\n            }\r\n        </div>\r\n         \r\n    )\r\n}\r\n\r\nexport default ChangePasswordForm;"]},"metadata":{},"sourceType":"module"}