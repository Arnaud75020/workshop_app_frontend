{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\arbog\\\\Documents\\\\workshop_app_frontend\\\\front-end\\\\src\\\\Components\\\\SharedComponents\\\\Login.js\";\nimport React, { useContext, useEffect } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { UserContext } from '../../Context/UserContext';\nimport { WorkshopContext } from '../../Context/WorkshopContext';\nimport './Login.scss';\nimport axios from 'axios';\nimport { AuthContext } from '../../Context/AuthContext';\n\nconst Login = () => {\n  const {\n    register,\n    handleSubmit,\n    reset,\n    errors\n  } = useForm();\n  const {\n    setUserInformation\n  } = useContext(UserContext);\n  const {\n    userWorkshops,\n    getUserWorkshops,\n    getWorkshop,\n    getAttendees\n  } = useContext(WorkshopContext);\n  const {\n    setAuth\n  } = useContext(AuthContext);\n\n  const onSubmit = async data => {\n    //run validation\n    //  axios\n    //       .post('/auth/login', data)\n    //       .then((response) => response.data)\n    //       .then((user) => {\n    //         getUser(user);\n    //         if (user.role === 'attendee') {\n    //           getUserWorkshops(user.id);\n    //         }\n    //       })\n    //       .then(() => setAuth(true))\n    //       .catch(() => console.log('Error logging in'));\n    const response = await axios.post('/auth/login', data);\n    console.log(\"response\", response.data.message);\n    await setUserInformation(response.data);\n    const {\n      id,\n      role\n    } = response.data.user;\n\n    if (role === \"attendee\") {\n      getUserWorkshops(id);\n    }\n\n    if (role === \"speaker\") {\n      getWorkshop(id);\n      getAttendees(id);\n    }\n\n    setAuth(true); //redirect to role-based view\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-page-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"login-img\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"right-side-container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 11\n    }\n  }, \"Welcome to productized\"), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    name: \"email\",\n    type: \"text\",\n    placeholder: \"Email Address\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    name: \"password\",\n    type: \"password\",\n    placeholder: \"Password\",\n    ref: register,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    type: \"submit\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, \"Forgot your account?\"))));\n};\n\nexport default Login;","map":{"version":3,"sources":["C:/Users/arbog/Documents/workshop_app_frontend/front-end/src/Components/SharedComponents/Login.js"],"names":["React","useContext","useEffect","useForm","UserContext","WorkshopContext","axios","AuthContext","Login","register","handleSubmit","reset","errors","setUserInformation","userWorkshops","getUserWorkshops","getWorkshop","getAttendees","setAuth","onSubmit","data","response","post","console","log","message","id","role","user"],"mappings":"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","sourcesContent":["import React, { useContext, useEffect } from 'react';\r\nimport { useForm } from 'react-hook-form';\r\nimport { UserContext } from '../../Context/UserContext';\r\nimport { WorkshopContext } from '../../Context/WorkshopContext';\r\nimport './Login.scss';\r\nimport axios from 'axios';\r\nimport { AuthContext } from '../../Context/AuthContext';\r\n\r\nconst Login = () => {\r\n  const { register, handleSubmit, reset, errors } = useForm();\r\n  const { setUserInformation } = useContext(UserContext);\r\n  const { userWorkshops, getUserWorkshops, getWorkshop, getAttendees } = useContext(WorkshopContext);\r\n  const { setAuth } = useContext(AuthContext);\r\n\r\n  const onSubmit = async (data) => {\r\n    //run validation\r\n    //  axios\r\n    //       .post('/auth/login', data)\r\n    //       .then((response) => response.data)\r\n    //       .then((user) => {\r\n    //         getUser(user);\r\n    //         if (user.role === 'attendee') {\r\n    //           getUserWorkshops(user.id);\r\n    //         }\r\n    //       })\r\n    //       .then(() => setAuth(true))\r\n    //       .catch(() => console.log('Error logging in'));\r\n    const response = await axios.post('/auth/login', data);\r\n    console.log(\"response\",response.data.message)\r\n    await setUserInformation(response.data);\r\n    const { id, role } = response.data.user\r\n    if(role === \"attendee\"){\r\n      getUserWorkshops(id)\r\n    }\r\n    if(role === \"speaker\"){\r\n        getWorkshop(id);\r\n        getAttendees(id)\r\n    }\r\n    setAuth(true);\r\n    //redirect to role-based view\r\n  };\r\n\r\n  return (\r\n    <div className='login-page-container'>\r\n      <div className='login-container'>\r\n        <div className='login-img' />\r\n        <div className='right-side-container'>\r\n          <h1>Welcome to productized</h1>\r\n          <form onSubmit={handleSubmit(onSubmit)}>\r\n            <input\r\n              name='email'\r\n              type='text'\r\n              placeholder='Email Address'\r\n              ref={register}\r\n            />\r\n            <input\r\n              name='password'\r\n              type='password'\r\n              placeholder='Password'\r\n              ref={register}\r\n            />\r\n            <button type='submit'>Login</button>\r\n            <hr />\r\n          </form>\r\n          <p>Forgot your account?</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}