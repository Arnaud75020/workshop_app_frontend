{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\arbog\\\\Documents\\\\workshop_app_frontend\\\\front-end\\\\src\\\\Context\\\\UserContext.js\";\nimport React, { createContext, useState, useEffect } from 'react';\nimport axios from 'axios';\nimport Cookies from 'js-cookie';\nexport const UserContext = createContext();\n\nconst UserContextProvider = props => {\n  const [attendees, setAttendees] = useState([]);\n  const [allAttendeesCopy, setAllattendeesCopy] = useState([]);\n  const [allUsers, setAllUsers] = useState([]);\n  const [allAttendees, setAllattendees] = useState([]);\n  const [users, setUsers] = useState([]);\n  const [filterUser, setFilterUser] = useState('All users');\n  const [speakers, setSpeakers] = useState([]);\n  const [searchValue, setsearchValue] = useState('');\n  const [user, setUser] = useState([]);\n  useEffect(() => {\n    getSpeakers();\n    getAttendees();\n    getAllUsers();\n  }, []);\n\n  const getSpeakers = () => {\n    axios.get('/users/speakers').then(response => response.data).then(speakersList => {\n      setSpeakers(speakersList);\n      console.log('speakers', speakersList);\n    });\n  };\n\n  const getAttendees = () => {\n    axios.get('/users/attendees').then(response => response.data).then(attendeesList => {\n      setAttendees(attendeesList);\n      console.log('attendees', attendeesList);\n    });\n  };\n\n  const getAllUsers = () => {\n    axios.get('/users').then(response => response.data).then(allUsersList => {\n      setUsers(allUsersList);\n      setAllUsers(allUsersList);\n    });\n  };\n\n  const setUserInformation = ({\n    user,\n    token\n  }) => {\n    setUser(user);\n    Cookies.set('authToken', token, {\n      secure: false\n    });\n  };\n\n  const logout = () => {\n    Cookies.remove('authToken');\n  };\n\n  const handleFilterUser = event => {\n    const role = event.target.value;\n\n    switch (role) {\n      case 'All users':\n        setFilterUser(role);\n        setUsers(allUsers);\n        break;\n\n      case 'Attendees':\n        setFilterUser(role);\n        setUsers(attendees);\n        break;\n\n      case 'Speakers':\n        setFilterUser(role);\n        setUsers(speakers);\n        break;\n    }\n  };\n\n  const handleChangeSearch = event => {\n    const {\n      value\n    } = event.target;\n\n    if (value.length) {\n      const filteredUsers = allUsers.filter(user => {\n        const name = `${user.firstname} ${user.lastname}`;\n        return name.toLowerCase().includes(value.toLowerCase());\n      });\n      setsearchValue(value);\n      setUsers(filteredUsers);\n    } else {\n      setsearchValue(value);\n      setUsers(allUsers);\n    }\n  };\n\n  const deleteUser = (id, role) => {\n    if (role == 'speaker') {\n      console.log('deleteUser', id, role);\n      axios.delete(`/workshops/all-speaker-workshops/${id}`).then(() => {\n        axios.delete(`/workshops/speaker/${id}`).then(() => {\n          axios.delete(`/users/${id}`).then(() => {\n            getAllUsers();\n          });\n        });\n      });\n    }\n\n    if (role == 'attendee') {\n      axios.delete(`/workshops/all-user-workshops/${id}`).then(() => {\n        axios.delete(`/users/${id}`).then(() => {\n          getAllUsers();\n        });\n      });\n    }\n\n    axios.delete(`/users/${id}`);\n    getAllUsers();\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(UserContext.Provider, {\n    value: {\n      users,\n      attendees,\n      handleFilterUser,\n      filterUser,\n      speakers,\n      allUsers,\n      searchValue,\n      handleChangeSearch,\n      deleteUser,\n      user,\n      setUserInformation,\n      getSpeakers,\n      logout\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 7\n    }\n  }, props.children));\n};\n\nexport default UserContextProvider;","map":{"version":3,"sources":["C:/Users/arbog/Documents/workshop_app_frontend/front-end/src/Context/UserContext.js"],"names":["React","createContext","useState","useEffect","axios","Cookies","UserContext","UserContextProvider","props","attendees","setAttendees","allAttendeesCopy","setAllattendeesCopy","allUsers","setAllUsers","allAttendees","setAllattendees","users","setUsers","filterUser","setFilterUser","speakers","setSpeakers","searchValue","setsearchValue","user","setUser","getSpeakers","getAttendees","getAllUsers","get","then","response","data","speakersList","console","log","attendeesList","allUsersList","setUserInformation","token","set","secure","logout","remove","handleFilterUser","event","role","target","value","handleChangeSearch","length","filteredUsers","filter","name","firstname","lastname","toLowerCase","includes","deleteUser","id","delete","children"],"mappings":"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","sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\n\r\nexport const UserContext = createContext();\r\n\r\nconst UserContextProvider = (props) => {\r\n  const [attendees, setAttendees] = useState([]);\r\n  const [allAttendeesCopy, setAllattendeesCopy] = useState([]);\r\n  const [allUsers, setAllUsers] = useState([]);\r\n  const [allAttendees, setAllattendees] = useState([]);\r\n  const [users, setUsers] = useState([]);\r\n  const [filterUser, setFilterUser] = useState('All users');\r\n  const [speakers, setSpeakers] = useState([]);\r\n  const [searchValue, setsearchValue] = useState('');\r\n  const [user, setUser] = useState([]);\r\n\r\n  useEffect(() => {\r\n    getSpeakers();\r\n    getAttendees();\r\n    getAllUsers();\r\n  }, []);\r\n\r\n  const getSpeakers = () => {\r\n    axios\r\n      .get('/users/speakers')\r\n      .then((response) => response.data)\r\n      .then((speakersList) => {\r\n        setSpeakers(speakersList);\r\n        console.log('speakers', speakersList);\r\n      });\r\n  };\r\n\r\n  const getAttendees = () => {\r\n    axios\r\n      .get('/users/attendees')\r\n      .then((response) => response.data)\r\n      .then((attendeesList) => {\r\n        setAttendees(attendeesList);\r\n        console.log('attendees', attendeesList);\r\n      });\r\n  };\r\n\r\n  const getAllUsers = () => {\r\n    axios\r\n      .get('/users')\r\n      .then((response) => response.data)\r\n      .then((allUsersList) => {\r\n        setUsers(allUsersList);\r\n        setAllUsers(allUsersList);\r\n      });\r\n  };\r\n\r\n  const setUserInformation = ({ user, token }) => {\r\n    setUser(user);\r\n    Cookies.set('authToken', token, { secure: false });\r\n  };\r\n\r\n  const logout = () => {\r\n    Cookies.remove('authToken')\r\n  }\r\n\r\n  const handleFilterUser = (event) => {\r\n    const role = event.target.value;\r\n\r\n    switch (role) {\r\n      case 'All users':\r\n        setFilterUser(role);\r\n        setUsers(allUsers);\r\n        break;\r\n      case 'Attendees':\r\n        setFilterUser(role);\r\n        setUsers(attendees);\r\n        break;\r\n      case 'Speakers':\r\n        setFilterUser(role);\r\n        setUsers(speakers);\r\n        break;\r\n    }\r\n  };\r\n\r\n  const handleChangeSearch = (event) => {\r\n    const { value } = event.target;\r\n    if (value.length) {\r\n      const filteredUsers = allUsers.filter((user) => {\r\n        const name = `${user.firstname} ${user.lastname}`;\r\n        return name.toLowerCase().includes(value.toLowerCase());\r\n      });\r\n      setsearchValue(value);\r\n      setUsers(filteredUsers);\r\n    } else {\r\n      setsearchValue(value);\r\n      setUsers(allUsers);\r\n    }\r\n  };\r\n\r\n  const deleteUser = (id, role) => {\r\n    if (role == 'speaker') {\r\n      console.log('deleteUser', id, role);\r\n      axios.delete(`/workshops/all-speaker-workshops/${id}`).then(() => {\r\n        axios.delete(`/workshops/speaker/${id}`).then(() => {\r\n          axios.delete(`/users/${id}`).then(() => {\r\n            getAllUsers();\r\n          });\r\n        });\r\n      });\r\n    }\r\n    if (role == 'attendee') {\r\n      axios.delete(`/workshops/all-user-workshops/${id}`).then(() => {\r\n        axios.delete(`/users/${id}`).then(() => {\r\n          getAllUsers();\r\n        });\r\n      });\r\n    }\r\n    axios.delete(`/users/${id}`);\r\n\r\n    getAllUsers();\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <UserContext.Provider\r\n        value={{\r\n          users,\r\n          attendees,\r\n          handleFilterUser,\r\n          filterUser,\r\n          speakers,\r\n          allUsers,\r\n          searchValue, \r\n          handleChangeSearch, \r\n          deleteUser, \r\n          user, \r\n          setUserInformation,\r\n          getSpeakers,\r\n          logout\r\n        }}>\r\n        {props.children}\r\n      </UserContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserContextProvider;\r\n"]},"metadata":{},"sourceType":"module"}