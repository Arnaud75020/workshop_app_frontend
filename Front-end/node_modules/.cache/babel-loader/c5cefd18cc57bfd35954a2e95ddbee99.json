{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\arbog\\\\Documents\\\\workshop_app_frontend\\\\front-end\\\\src\\\\Components\\\\Attendee\\\\AttendeeSubComponents\\\\MyWorkshopDetails.js\";\nimport React, { useContext, useState, useEffect } from 'react';\nimport { WorkshopContext } from '../../../Context/WorkshopContext';\nimport { UserContext } from '../../../Context/UserContext';\n\nconst MyWorkshopDetails = ({\n  workshop,\n  reachedLimit\n}) => {\n  console.log('workshop', workshop);\n  const {\n    user\n  } = useContext(UserContext);\n  const {\n    workshops,\n    userWorkshops,\n    addUserWorkshop,\n    deleteUserWorkshop,\n    getWorkshops\n  } = useContext(WorkshopContext);\n  const [isEnrolled, setIsEnrolled] = useState(false);\n  const [percentage, setPercentage] = useState(null);\n  useEffect(() => {\n    userWorkshops.length && userWorkshops.map(userWorkshop => {\n      if (userWorkshop.workshop_id === workshop.id) {\n        setIsEnrolled(true);\n      }\n    });\n  }, [userWorkshops]);\n  useEffect(() => {\n    calcPercentage(workshop.enrolled_attendees, workshop.room_capacity);\n  }, [workshop]);\n\n  const calcPercentage = (enrolled, room_capacity) => {\n    const percentage = Math.round(enrolled / room_capacity * 100);\n    setPercentage(percentage);\n  };\n\n  const handleEnrolled = enroll => {\n    if (enroll) {\n      addUserWorkshop(workshop.id, user.id, workshop.speaker_id);\n    } else {\n      deleteUserWorkshop(workshop.id, user.id, workshop.speaker_id);\n    }\n\n    setIsEnrolled(!isEnrolled);\n  };\n\n  const day = workshop.date[8] === '0' ? workshop.date.substring(9, 10) : workshop.date.substring(8, 10);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"myWorkshop-details\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"myWorkshop-details-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"myWorkshop-details-date\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"myWorkshop-details-day\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 11\n    }\n  }, `${workshop.workshop_month} ${day}  -  ${workshop.starting_hour.substring(0, 5)} - ${workshop.ending_hour.substring(0, 5)}`))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"myWorkshop-basic-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: isEnrolled ? 'myWorkshop-basic-info-left-enrolled' : 'myWorkshop-basic-info-left',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    className: isEnrolled ? 'myWorkshop-details-title-enroled' : 'myWorkshop-details-title',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 11\n    }\n  }, workshop.title), /*#__PURE__*/React.createElement(\"h3\", {\n    className: isEnrolled ? 'myWorkshop-details-speaker-enroled' : 'myWorkshop-details-speaker',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 11\n    }\n  }, workshop.workshop_speaker), /*#__PURE__*/React.createElement(\"p\", {\n    className: isEnrolled ? 'myWorkshop-details-description-enroled' : 'myWorkshop-details-description',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, workshop.description)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"myWorkshop-basic-info-right\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"myWorkshops-room-capacity\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"myWorkshops-room-capacity-info\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    className: \"myWorkshops-room-capacity-title\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 15\n    }\n  }, \"Room Capacity\"), percentage !== null && /*#__PURE__*/React.createElement(\"p\", {\n    className: \"myWorkshops-room-capacity-percentage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 17\n    }\n  }, percentage, \"%\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"progress-bar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, percentage !== null && /*#__PURE__*/React.createElement(\"div\", {\n    className: \"progress-bar-fill\",\n    style: {\n      width: `${percentage}%`\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 17\n    }\n  }))), /*#__PURE__*/React.createElement(\"p\", {\n    className: workshop.status_open ? 'status-open' : 'status-closed',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, workshop.status_open ? 'Registrations OPEN' : 'Registrations CLOSED'), isEnrolled ? /*#__PURE__*/React.createElement(\"button\", {\n    className: \"myWorkshop-handle-not-enrolled\",\n    onClick: () => handleEnrolled(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 13\n    }\n  }, \"LEAVE\") : workshop.status_open !== 0 && /*#__PURE__*/React.createElement(\"button\", {\n    className: reachedLimit ? 'myWorkshop-handle-enrolled-disabled' : 'myWorkshop-handle-enrolled',\n    disabled: reachedLimit ? true : false,\n    onClick: () => handleEnrolled(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, \"ENROLL\"))));\n};\n\nexport default MyWorkshopDetails;","map":{"version":3,"sources":["C:/Users/arbog/Documents/workshop_app_frontend/front-end/src/Components/Attendee/AttendeeSubComponents/MyWorkshopDetails.js"],"names":["React","useContext","useState","useEffect","WorkshopContext","UserContext","MyWorkshopDetails","workshop","reachedLimit","console","log","user","workshops","userWorkshops","addUserWorkshop","deleteUserWorkshop","getWorkshops","isEnrolled","setIsEnrolled","percentage","setPercentage","length","map","userWorkshop","workshop_id","id","calcPercentage","enrolled_attendees","room_capacity","enrolled","Math","round","handleEnrolled","enroll","speaker_id","day","date","substring","workshop_month","starting_hour","ending_hour","title","workshop_speaker","description","width","status_open"],"mappings":"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","sourcesContent":["import React, { useContext, useState, useEffect } from 'react';\r\nimport { WorkshopContext } from '../../../Context/WorkshopContext';\r\nimport { UserContext } from '../../../Context/UserContext';\r\n\r\nconst MyWorkshopDetails = ({ workshop, reachedLimit }) => {\r\n  console.log('workshop', workshop);\r\n\r\n  const { user } = useContext(UserContext);\r\n  const {\r\n    workshops,\r\n    userWorkshops,\r\n    addUserWorkshop,\r\n    deleteUserWorkshop,\r\n    getWorkshops,\r\n  } = useContext(WorkshopContext);\r\n\r\n  const [isEnrolled, setIsEnrolled] = useState(false);\r\n  const [percentage, setPercentage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    userWorkshops.length &&\r\n      userWorkshops.map((userWorkshop) => {\r\n        if (userWorkshop.workshop_id === workshop.id) {\r\n          setIsEnrolled(true);\r\n        }\r\n      });\r\n  }, [userWorkshops]);\r\n\r\n  useEffect(() => {\r\n    calcPercentage(workshop.enrolled_attendees, workshop.room_capacity);\r\n\r\n  }, [workshop]);\r\n\r\n  const calcPercentage = (enrolled, room_capacity) => {\r\n    const percentage = Math.round((enrolled / room_capacity) * 100);\r\n    setPercentage(percentage);\r\n  };\r\n\r\n  const handleEnrolled = (enroll) => {\r\n    if (enroll) {\r\n      addUserWorkshop(workshop.id, user.id, workshop.speaker_id);\r\n    } else {\r\n      deleteUserWorkshop(workshop.id, user.id, workshop.speaker_id);\r\n    }\r\n    setIsEnrolled(!isEnrolled);\r\n  };\r\n\r\n  const day =\r\n    workshop.date[8] === '0'\r\n      ? workshop.date.substring(9, 10)\r\n      : workshop.date.substring(8, 10);\r\n\r\n  return (\r\n    <div className='myWorkshop-details'>\r\n      <div className='myWorkshop-details-header'>\r\n        <div className='myWorkshop-details-date'>\r\n          <p className='myWorkshop-details-day'>{`${workshop.workshop_month} ${day}  -  ${workshop.starting_hour.substring(0, 5)} - ${workshop.ending_hour.substring(0, 5)}`}</p>\r\n        </div>\r\n      </div>\r\n      <div className='myWorkshop-basic-info'>\r\n        <div className={isEnrolled ? 'myWorkshop-basic-info-left-enrolled' : 'myWorkshop-basic-info-left'}>\r\n          <h2 className={isEnrolled? 'myWorkshop-details-title-enroled' : 'myWorkshop-details-title'}>\r\n            {workshop.title}\r\n          </h2>\r\n          <h3 className={isEnrolled? 'myWorkshop-details-speaker-enroled' : 'myWorkshop-details-speaker'}>\r\n            {workshop.workshop_speaker}\r\n          </h3>\r\n          <p className={isEnrolled? 'myWorkshop-details-description-enroled' : 'myWorkshop-details-description'}>\r\n            {workshop.description}\r\n          </p>\r\n        </div>\r\n        <div className='myWorkshop-basic-info-right'>\r\n          <div className='myWorkshops-room-capacity'>\r\n            <div className='myWorkshops-room-capacity-info'>\r\n              <p className='myWorkshops-room-capacity-title'>\r\n                Room Capacity\r\n              </p>\r\n              {percentage !== null && (\r\n                <p className='myWorkshops-room-capacity-percentage'>\r\n                  {percentage}%\r\n                </p>\r\n              )}\r\n            </div>\r\n            <div className='progress-bar'>\r\n              {percentage !== null && (\r\n                <div\r\n                  className='progress-bar-fill'\r\n                  style={{ width: `${percentage}%` }}\r\n                />\r\n              )}\r\n            </div>\r\n          </div>\r\n          <p className={workshop.status_open ? 'status-open' : 'status-closed'}>\r\n              {workshop.status_open ? 'Registrations OPEN' : 'Registrations CLOSED'}\r\n          </p>\r\n          {isEnrolled ? (\r\n            <button className='myWorkshop-handle-not-enrolled' onClick={() => handleEnrolled(false)}>\r\n              LEAVE\r\n            </button>\r\n          ) : (\r\n            workshop.status_open !== 0 && (\r\n            <button className={reachedLimit ? 'myWorkshop-handle-enrolled-disabled' : 'myWorkshop-handle-enrolled'} disabled={reachedLimit ? true : false} onClick={() => handleEnrolled(true)}>\r\n              ENROLL\r\n            </button>\r\n            )\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyWorkshopDetails;\r\n"]},"metadata":{},"sourceType":"module"}